---
title: HTTP/1.1 和 HTTP/2 的主要区别是什么？HTTPS 是如何保证通信安全的（SSL/TLS 握手过程、对称加密、非对称加密、数字证书）？
published: 2025-05-01
description: HTTP/1.1 和 HTTP/2 的主要区别是什么？HTTPS 是如何保证通信安全的（SSL/TLS 握手过程、对称加密、非对称加密、数字证书）？
tags: [Markdown, Blogging]
category: Java mianshi
licenseName: "Unlicensed"
author: Ankou
sourceLink: ''
draft: false
---
**HTTP/1.1 和 HTTP/2 的主要区别是什么？HTTPS 是如何保证通信安全的（SSL/TLS 握手过程、对称加密、非对称加密、数字证书）？**

 **一、HTTP/1.1 与 HTTP/2 的核心区别**

**1. 多路复用 vs 队头阻塞**

|   **特性**   |           **HTTP/1.1**            |          **HTTP/2**          |
| :----------: | :-------------------------------: | :--------------------------: |
| **连接方式** | 每个请求独立 TCP 连接（或管道化） |   **单 TCP 连接多路复用**    |
| **队头阻塞** |   存在（前序请求阻塞后续请求）    | **完全消除**（帧可乱序传输） |
| **并发效率** |   低（浏览器需开 6-8 连接并行）   |  高（单连接支持数百并发流）  |

> **HTTP/2 多路复用原理**：
> 将数据拆分为​**​二进制帧​**​（Header Frame + Data Frame），每个帧携带 Stream ID 标识所属请求。接收方根据 ID 重组数据，实现乱序传输。

**2. 头部压缩机制**

|   **特性**   |   **HTTP/1.1**    |           **HTTP/2**            |
| :----------: | :---------------: | :-----------------------------: |
| **头部格式** | 文本（冗余重复）  | **HPACK 压缩**（静态/动态字典） |
| **典型开销** | 500-800 字节/请求 |      **压缩后 50%+ 节省**       |

> **HPACK 原理**：
>
> - **静态字典**：预定义 61 个高频头部字段（如 `:method: GET`）
> - **动态字典**：缓存本次连接中出现的自定义头部（如 `Cookie`）
> - **哈夫曼编码**：压缩剩余字段

**3. 服务器推送（Server Push）**

![](/q_img/服务器推送（Server Push）.png)

- **价值**：减少 RTT（往返延迟），提升页面加载速度 30%+
- **风险**：可能推送无用资源（需谨慎配置）

**4. 优先级与依赖控制**

![](/q_img/优先级与依赖控制​.png)

**HTTP/2 实现**：
通过 `PRIORITY` 帧指定资源加载优先级（如 CSS 优先于 JS）

- **效果**：优化关键渲染路径，提升首屏速度

 **二、HTTPS 如何保证通信安全？**

HTTPS = HTTP + SSL/TLS，通过四层机制确保安全：

**1. 混合加密体系**

| **阶段** | **加密类型** |   **算法示例**    |     **作用**     |
| :------: | :----------: | :---------------: | :--------------: |
| 密钥交换 |  非对称加密  |    RSA、ECDHE     | 安全传输对称密钥 |
| 数据传输 |   对称加密   | AES-256、ChaCha20 | 高效加密通信内容 |

> **优势互补**：非对称加密解决密钥传输问题，对称加密提升传输效率。

**2. 数字证书与身份认证**

![](/q_img/数字证书与身份认证​.png)

**证书内容**：域名、公钥、有效期、CA 签名

- 浏览器验证：
  1. 检查证书有效期/吊销列表（CRL/OCSP）
  2. 用 CA 公钥（预置在系统）验证签名

**3. SSL/TLS 握手流程（RSA 示例）**

![](/q_img/SSLTLS 握手流程（RSA 示例）​.png)

**关键步骤解释**：

- **随机数 A/B/C**：防止重放攻击，确保密钥唯一性
- **会话密钥**：`master_secret = PRF(A + B + C)`（PRF 为伪随机函数）

**4. 完整性保护**

- **机制**：通过 **HMAC（哈希消息认证码）** 或 **AEAD（认证加密）**
- 流程：
  1. 发送方：计算明文哈希值，与密钥混合加密
  2. 接收方：解密后验证哈希值是否匹配
- **作用**：防止传输中被篡改（如植入恶意代码）

 **三、HTTPS 安全增强演进**

**1. 前向保密（Perfect Forward Secrecy, PFS）**

- **问题**：RSA 密钥交换若私钥泄露，历史通信可被解密
- **方案**：**ECDHE 密钥交换**（每次会话生成临时密钥）
- **效果**：临时密钥用完即焚，即使私钥泄露也无法解密历史数据

**2. HSTS（HTTP Strict Transport Security）**

```http
Strict-Transport-Security: max-age=31536000; includeSubDomains
```

- **作用**：强制浏览器使用 HTTPS（防止 SSL Strip 中间人攻击）
- **效果**：用户访问 `http://example.com` 自动跳转 `https`

**3. OCSP Stapling**

- **传统问题**：浏览器验证证书吊销状态需访问 CA，泄露隐私
- **方案**：由服务器定期获取并携带 OCSP 响应
- **价值**：加速握手 + 保护用户隐私

**四、总结对比：HTTP/1.1 vs HTTP/2 vs HTTPS**

| **维度** |  **HTTP/1.1**  |    **HTTP/2**    |        **HTTPS**        |
| :------: | :------------: | :--------------: | :---------------------: |
| 传输效率 | 低（队头阻塞） |  高（多路复用）  |      同 HTTP 版本       |
|  安全性  |     无加密     |      无加密      |  加密+身份认证+完整性   |
| 头部开销 | 高（文本冗余） | 低（HPACK 压缩） |      同 HTTP 版本       |
| 加载速度 |       慢       | 快（服务器推送） | 略慢于 HTTP（握手开销） |

> **部署建议**：
>
> - **所有网站必须启用 HTTPS**（SEO 排名提升 + 防止数据泄露）
> - 启用 HTTP/2 + TLS 1.3（性能与安全兼备）
> - 配置 HSTS + OCSP Stapling 增强安全性

通过 HTTP/2 的性能优化和 HTTPS 的安全加固，现代 Web 应用实现了**高效与安全**的完美平衡！